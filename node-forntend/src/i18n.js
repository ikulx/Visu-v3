// src/i18n.js
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

const resources = {
  de: {
    translation: {
      // --- Originale Schlüssel ---
      projektnummerLabel: "Projektnummer:",
      schemanummerLabel: "Schemanummer:",
      "Kreis Seiten": "Kreis Seiten",
      "Kreis2 Seite": "Kreis2 Seite",
      "Kreis3 Seite": "Kreis3 Seite",
      "Dreieck Seite": "Dreieck Seite",
      "EZ": "WÄRMEERZEUGER",
      "EZ01": "Erzeuger 01",
      "EZ02": "Erzeuger 02",
      "EZ03": "Erzeuger 03",
      "EZ04": "Erzeuger 04",
      "EZ05": "Erzeuger 05",
      "EZ06": "Erzeuger 06",
      "BWW": "WARMWASSER",
      "HG": "HEIZGRUPPE",
      "PS": "SPEICHER",
      connectionLostTitle: "Verbindungsproblem",
      connectionLost: "Verbindung zum Server unterbrochen",
      connectionError: "Verbindungsfehler: {{message}}",
      reconnectError: "Wiederverbindungsfehler: {{message}}",
      initialConnectionError: "Keine Verbindung zum Server beim Start",
      reconnecting: "Versuche, die Verbindung wiederherzustellen...",
      Realtime:"Live",
      Range:"Bereich",
      from:"von",
      to:"bis",
      ALARM_RESET_ACTION:"RESET",
      // --- Neue/Aktualisierte Schlüssel ---
      alarmNotificationsSuppressed: "Alarmmeldungen unterdrückt!",
      mqttNotificationsEnabled: "MQTT Alarm-Benachrichtigungen aktiviert.",
      mqttNotificationsDisabled: "MQTT Alarm-Benachrichtigungen deaktiviert.",
      disableMqttNotificationsTooltip: "MQTT-Benachrichtigungen für neue Alarme deaktivieren",
      enableMqttNotificationsTooltip: "MQTT-Benachrichtigungen für neue Alarme aktivieren",
      alarmsTitle: "Alarme & Meldungen",
      close: "Schließen",
      reset: "Reset",
      currentAlarms: "Aktuelle Alarme",
      alarmHistory: "Historie",
      status_active: "Aktiv",
      status_inactive: "Inaktiv",
      status_reset: "Reset",
      noActiveAlarms: "Keine aktiven Alarme",
      noAlarmHistory: "Keine Alarmhistorie verfügbar",
      paginationText: "{{start}}-{{end}} von {{total}} Einträgen",
      errorLoadingHistory: "Fehler beim Laden der Historie.",
      errorLoadingActiveAlarms: "Fehler beim Laden der aktiven Alarme.",
      resetConfirmed: "Reset vom System bestätigt.",
      priority_prio1: "Prio 1",
      priority_prio2: "Prio 2",
      priority_prio3: "Prio 3",
      priority_warning: "Warnung",
      priority_info: "Info",
      priority_default: "Unbekannt",
      userSettings: "Benutzer",
      userSettingsTitle: "Benutzereinstellungen",
      currentUser: "Aktueller Benutzer",
      userSettingsPlaceholder: "Weitere Einstellungen folgen...",
      notLoggedIn: "Nicht angemeldet.",
      configureAlarmNotifications: "Konfigurieren Sie hier, wer bei Alarmen welcher Priorität per E-Mail oder Telefon benachrichtigt werden soll.",
      emailNotifications: "E-Mail Benachrichtigungen",
      phoneNotifications: "Telefon Benachrichtigungen",
      noTargetsConfigured: "Keine Ziele konfiguriert.",
      editPriorities: "Prioritäten bearbeiten",
      save: "Speichern",
      cancel: "Abbrechen",
      confirmDeleteTarget: "Dieses Ziel wirklich löschen?",
      yes: "Ja",
      no: "Nein",
      delete: "Löschen",
      addNewTarget: "Neues Ziel hinzufügen",
      pleaseEnterTarget: "Bitte Ziel eingeben!",
      selectPriorities: "Prioritäten auswählen",
      add: "Hinzufügen",
      emailAddress: "E-Mail Adresse",
      phoneNumber: "Telefonnummer",
      targetCannotBeEmpty: "Ziel darf nicht leer sein.",
      invalidEmailFormat: "Ungültiges E-Mail-Format.",
      invalidPhoneFormat: "Ungültiges Telefonnummern-Format (mind. 5 Zeichen).",
      delayInMinutes: "Verzögerung (Minuten)",
      delayLabel: "Verzögert um",
      minutesSuffix: "Min.",
      minutesSuffixShort: "Min",
      targetDelayInfo: "Für Ziele kann eine Verzögerung in Minuten eingestellt werden.", // Angepasster Text
      delay: "Verzögerung",
      logout: "Logout",
      login: "Login",
      settings: "Einstellungen",
      loadingMenu: "Menü wird geladen...",
      reconnectFailed: "Wiederverbindung fehlgeschlagen. Bitte laden Sie die Seite neu.",
      reloadPage: "Seite neu laden",
      noPageAvailable: "Keine Seite verfügbar.",
      pageNotFound: "Seite nicht gefunden",
      checkInput: "Bitte Eingaben prüfen.",
      Prioritäten: "Prioritäten",
      smsNotificationsActive: "SMS Benachrichtigungen aktiv",
      smsRequiresSubscriptionTitle: "Zusätzliches Abonnement benötigt",
      smsRequiresSubscriptionText: "Um SMS-Benachrichtigungen zu erhalten, ist ein aktives SMS-Abonnement erforderlich. Bitte kontaktieren Sie Ihren Dienstanbieter.",
      active: "Aktiv",
      inactive: "Inaktiv",
      permissionRequiredSms: "Nur Admin/Fachmann kann dies ändern.",
    }
  },
  en: {
    translation: {
      // --- Originale Schlüssel ---
      projektnummerLabel: "Project number:",
      schemanummerLabel: "Schema number:",
      "Kreis Seiten": "Circle Pages",
      "Kreis2 Seite": "Circle Page 2",
      "Kreis3 Seite": "Circle Page 3",
      "Dreieck Seite": "Triangle Page",
      "EZ": "HEAT GENERATOR",
      "EZ01": "GENERATOR 01",
      "EZ02": "GENERATOR 02",
      "EZ03": "GENERATOR 03",
      "EZ04": "GENERATOR 04",
      "EZ05": "GENERATOR 05",
      "EZ06": "GENERATOR 06",
      "BWW": "HOT WATER",
      "HG": "HEATING GROUP",
      "PS": "STORAGE",
      Heizgruppen: "Heating groups",
      connectionLostTitle: "Connection Issue",
      connectionLost: "Connection to server lost",
      connectionError: "Connection error: {{message}}",
      reconnectError: "Reconnection error: {{message}}",
      initialConnectionError: "No connection to server on startup",
      reconnecting: "Attempting to reconnect...",
      Realtime:"Live",
      Range:"Range",
      from:"from",
      to:"to",
      ALARM_RESET_ACTION:"RESET",
      // --- Neue/Aktualisierte Schlüssel ---
      alarmNotificationsSuppressed: "Alarm notifications suppressed!",
      mqttNotificationsEnabled: "MQTT alarm notifications enabled.",
      mqttNotificationsDisabled: "MQTT alarm notifications disabled.",
      disableMqttNotificationsTooltip: "Disable MQTT notifications for new alarms",
      enableMqttNotificationsTooltip: "Enable MQTT notifications for new alarms",
      alarmsTitle: "Alarms & Messages",
      close: "Close",
      reset: "Reset",
      currentAlarms: "Current Alarms",
      alarmHistory: "History",
      status_active: "Active",
      status_inactive: "Inactive",
      status_reset: "Reset",
      noActiveAlarms: "No active alarms",
      noAlarmHistory: "No alarm history available",
      paginationText: "{{start}}-{{end}} of {{total}} entries",
      errorLoadingHistory: "Error loading history.",
      errorLoadingActiveAlarms: "Error loading active alarms.",
      resetConfirmed: "Reset confirmed by system.",
      priority_prio1: "Prio 1",
      priority_prio2: "Prio 2",
      priority_prio3: "Prio 3",
      priority_warning: "Warning",
      priority_info: "Info",
      priority_default: "Unknown",
      userSettings: "User",
      userSettingsTitle: "User Settings",
      currentUser: "Current User",
      userSettingsPlaceholder: "More settings will follow...",
      notLoggedIn: "Not logged in.",
      configureAlarmNotifications: "Configure who should be notified via email or phone for alarms of which priority.",
      emailNotifications: "Email Notifications",
      phoneNotifications: "Phone Notifications",
      noTargetsConfigured: "No targets configured.",
      editPriorities: "Edit Priorities",
      save: "Save",
      cancel: "Cancel",
      confirmDeleteTarget: "Really delete this target?",
      yes: "Yes",
      no: "No",
      delete: "Delete",
      addNewTarget: "Add New Target",
      pleaseEnterTarget: "Please enter target!",
      selectPriorities: "Select priorities",
      add: "Add",
      emailAddress: "Email Address",
      phoneNumber: "Phone Number",
      targetCannotBeEmpty: "Target cannot be empty.",
      invalidEmailFormat: "Invalid email format.",
      invalidPhoneFormat: "Invalid phone number format (min. 5 digits).",
      delayInMinutes: "Delay (Minutes)",
      delayLabel: "Delayed by",
      minutesSuffix: "Min.",
      minutesSuffixShort: "Min",
      targetDelayInfo: "For targets, a delay in minutes can be set.", // Angepasster Text
      delay: "Delay",
      logout: "Logout",
      login: "Login",
      settings: "Settings",
      loadingMenu: "Loading menu...",
      reconnectFailed: "Reconnect failed. Please reload the page.",
      reloadPage: "Reload page",
      noPageAvailable: "No page available.",
      pageNotFound: "Page not found",
      checkInput: "Please check inputs.",
      Prioritäten: "Priorities",
      smsNotificationsActive: "SMS Notifications Active",
      smsRequiresSubscriptionTitle: "Additional Subscription Required",
      smsRequiresSubscriptionText: "To receive SMS notifications, an active SMS subscription is required. Please contact your service provider.",
      active: "Active",
      inactive: "Inactive",
      permissionRequiredSms: "Only Admin/Technician can change this.",
    }
  },
  fr: { // Französische Übersetzungen hinzugefügt/aktualisiert
    translation: {
      // --- Originale Schlüssel ---
      projektnummerLabel: "Numéro de projet:",
      schemanummerLabel: "Numéro de schéma:",
      "Kreis Seiten": "Pages de Cercle",
      "Kreis2 Seite": "Page Cercle 2",
      "Kreis3 Seite": "Page Cercle 3",
      "Dreieck Seite": "Page Triangle",
      "EZ": "GÉNÉRATEURS DE CHALEUR",
      "EZ01": "GÉNÉRATEUR 01",
      "EZ02": "GÉNÉRATEUR 02",
      "EZ03": "GÉNÉRATEUR 03",
      "EZ04": "GÉNÉRATEUR 04",
      "EZ05": "GÉNÉRATEUR 05",
      "EZ06": "GÉNÉRATEUR 06",
      "BWW": "EAU CHAUDE",
      "HG": "GROUPE DE CHAUFFAGE",
      "PS": "STOCKAGE",
      connectionLostTitle: "Problème de connexion",
      connectionLost: "Connexion au serveur perdue",
      connectionError: "Erreur de connexion: {{message}}",
      reconnectError: "Erreur de reconnexion: {{message}}",
      initialConnectionError: "Aucune connexion au serveur au démarrage",
      reconnecting: "Tentative de reconnexion...",
      Realtime:"Live",
      Range:"Secteur",
      from:"de",
      to:"à",
      ALARM_RESET_ACTION:"RESET",
      // --- Neue/Aktualisierte Schlüssel ---
      alarmNotificationsSuppressed: "Notifications d'alarme supprimées!",
      mqttNotificationsEnabled: "Notifications d'alarme MQTT activées.",
      mqttNotificationsDisabled: "Notifications d'alarme MQTT désactivées.",
      disableMqttNotificationsTooltip: "Désactiver les notifications MQTT pour les nouvelles alarmes",
      enableMqttNotificationsTooltip: "Activer les notifications MQTT pour les nouvelles alarmes",
      alarmsTitle: "Alarmes & Messages",
      close: "Fermer",
      reset: "Réinitialiser",
      currentAlarms: "Alarmes Actuelles",
      alarmHistory: "Historique",
      status_active: "Actif",
      status_inactive: "Inactif",
      status_reset: "Réinitialisé",
      noActiveAlarms: "Aucune alarme active",
      noAlarmHistory: "Aucun historique d'alarme disponible",
      paginationText: "{{start}}-{{end}} sur {{total}} entrées",
      errorLoadingHistory: "Erreur lors du chargement de l'historique.",
      errorLoadingActiveAlarms: "Erreur lors du chargement des alarmes actives.",
      resetConfirmed: "Réinitialisation confirmée par le système.",
      priority_prio1: "Prio 1",
      priority_prio2: "Prio 2",
      priority_prio3: "Prio 3",
      priority_warning: "Avertissement",
      priority_info: "Info",
      priority_default: "Inconnue",
      userSettings: "Utilisateur",
      userSettingsTitle: "Paramètres utilisateur",
      currentUser: "Utilisateur actuel",
      userSettingsPlaceholder: "D'autres paramètres suivront...",
      notLoggedIn: "Non connecté.",
      configureAlarmNotifications: "Configurez ici qui doit être averti par e-mail ou téléphone pour les alarmes de quelle priorité.",
      emailNotifications: "Notifications par E-mail",
      phoneNotifications: "Notifications par Téléphone",
      noTargetsConfigured: "Aucune cible configurée.",
      editPriorities: "Modifier les Priorités",
      save: "Enregistrer",
      cancel: "Annuler",
      confirmDeleteTarget: "Vraiment supprimer cette cible?",
      yes: "Oui",
      no: "Non",
      delete: "Supprimer",
      addNewTarget: "Ajouter Nouvelle Cible",
      pleaseEnterTarget: "Veuillez saisir la cible!",
      selectPriorities: "Sélectionner priorités",
      add: "Ajouter",
      emailAddress: "Adresse E-mail",
      phoneNumber: "Numéro de Téléphone",
      targetCannotBeEmpty: "La cible ne peut pas être vide.",
      invalidEmailFormat: "Format d'e-mail invalide.",
      invalidPhoneFormat: "Format de numéro de téléphone invalide (min. 5 chiffres).",
      delayInMinutes: "Délai (Minutes)",
      delayLabel: "Retardé de",
      minutesSuffix: "Min.",
      minutesSuffixShort: "Min",
      targetDelayInfo: "Pour les cibles, un délai en minutes peut être défini.", // Angepasster Text
      delay: "Délai",
      logout: "Déconnexion",
      login: "Connexion",
      settings: "Paramètres",
      loadingMenu: "Chargement du menu...",
      reconnectFailed: "Échec de la reconnexion. Veuillez recharger la page.",
      reloadPage: "Recharger la page",
      noPageAvailable: "Aucune page disponible.",
      pageNotFound: "Page non trouvée",
      checkInput: "Veuillez vérifier les entrées.",
      Prioritäten: "Priorités",
      smsNotificationsActive: "Notifications SMS Actives",
      smsRequiresSubscriptionTitle: "Abonnement Supplémentaire Requis",
      smsRequiresSubscriptionText: "Pour recevoir des notifications par SMS, un abonnement SMS actif est requis. Veuillez contacter votre fournisseur de services.",
      active: "Actif",
      inactive: "Inactif",
      permissionRequiredSms: "Seuls l'administrateur/technicien peuvent modifier ceci.",
    }
  },
  it: { // Italienische Übersetzungen hinzugefügt/aktualisiert
    translation: {
      // --- Originale Schlüssel ---
      projektnummerLabel: "Numero del progetto:",
      schemanummerLabel: "Numero schema:",
      "Kreis Seiten": "Pagine del Cerchio",
      "Kreis2 Seite": "Pagina Cerchio 2",
      "Kreis3 Seite": "Pagina Cerchio 3",
      "Dreieck Seite": "Pagina Triangolo",
      "EZ": "GENERATORE DI CALORE",
      "EZ01": "GENERATORE 01",
      "EZ02": "GENERATORE 02",
      "EZ03": "GENERATORE 03",
      "EZ04": "GENERATORE 04",
      "EZ05": "GENERATORE 05",
      "EZ06": "GENERATORE 06",
      "BWW": "ACQUA CALDA",
      "HG": "GRUPPO RISCALDAMENTO",
      "PS": "MEMORIA",
      connectionLostTitle: "Problema di connessione",
      connectionLost: "Connessione al server persa",
      connectionError: "Errore di connessione: {{message}}",
      reconnectError: "Errore di riconnessione: {{message}}",
      initialConnectionError: "Nessuna connessione al server all'avvio",
      reconnecting: "Tentativo di riconnessione...",
      Realtime:"Live",
      Range:"Settore",
      from:"da",
      to:"a",
      ALARM_RESET_ACTION:"RESET",
      // --- Neue/Aktualisierte Schlüssel ---
      alarmNotificationsSuppressed: "Notifiche di allarme soppresse!",
      mqttNotificationsEnabled: "Notifiche di allarme MQTT abilitate.",
      mqttNotificationsDisabled: "Notifiche di allarme MQTT disabilitate.",
      disableMqttNotificationsTooltip: "Disabilita notifiche MQTT per nuovi allarmi",
      enableMqttNotificationsTooltip: "Abilita notifiche MQTT per nuovi allarmi",
      alarmsTitle: "Allarmi & Messaggi",
      close: "Chiudi",
      reset: "Reset",
      currentAlarms: "Allarmi Attuali",
      alarmHistory: "Storico",
      status_active: "Attivo",
      status_inactive: "Inattivo",
      status_reset: "Reset",
      noActiveAlarms: "Nessun allarme attivo",
      noAlarmHistory: "Nessuno storico allarmi disponibile",
      paginationText: "{{start}}-{{end}} di {{total}} voci",
      errorLoadingHistory: "Errore durante il caricamento dello storico.",
      errorLoadingActiveAlarms: "Errore durante il caricamento degli allarmi attivi.",
      resetConfirmed: "Reset confermato dal sistema.",
      priority_prio1: "Prio 1",
      priority_prio2: "Prio 2",
      priority_prio3: "Prio 3",
      priority_warning: "Avviso",
      priority_info: "Info",
      priority_default: "Sconosciuta",
      userSettings: "Utente",
      userSettingsTitle: "Impostazioni utente",
      currentUser: "Utente corrente",
      userSettingsPlaceholder: "Altre impostazioni seguiranno...",
      notLoggedIn: "Non connesso.",
      configureAlarmNotifications: "Configura qui chi deve essere avvisato via e-mail o telefono per allarmi di quale priorità.",
      emailNotifications: "Notifiche Email",
      phoneNotifications: "Notifiche Telefono",
      noTargetsConfigured: "Nessuna destinazione configurata.",
      editPriorities: "Modifica Priorità",
      save: "Salva",
      cancel: "Annulla",
      confirmDeleteTarget: "Eliminare davvero questa destinazione?",
      yes: "Sì",
      no: "No",
      delete: "Elimina",
      addNewTarget: "Aggiungi Nuova Destinazione",
      pleaseEnterTarget: "Inserisci destinazione!",
      selectPriorities: "Seleziona priorità",
      add: "Aggiungi",
      emailAddress: "Indirizzo Email",
      phoneNumber: "Numero di Telefono",
      targetCannotBeEmpty: "La destinazione non può essere vuota.",
      invalidEmailFormat: "Formato email non valido.",
      invalidPhoneFormat: "Formato numero di telefono non valido (min. 5 cifre).",
      delayInMinutes: "Ritardo (Minuti)",
      delayLabel: "Ritardato di",
      minutesSuffix: "Min.",
      minutesSuffixShort: "Min",
      targetDelayInfo: "Per le destinazioni, è possibile impostare un ritardo in minuti.", // Angepasster Text
      delay: "Ritardo",
      logout: "Logout",
      login: "Login",
      settings: "Impostazioni",
      loadingMenu: "Caricamento menu...",
      reconnectFailed: "Riconnessione fallita. Si prega di ricaricare la pagina.",
      reloadPage: "Ricarica pagina",
      noPageAvailable: "Nessuna pagina disponibile.",
      pageNotFound: "Pagina non trovata",
      checkInput: "Si prega di controllare gli input.",
      Prioritäten: "Priorità",
      smsNotificationsActive: "Notifiche SMS Attive",
      smsRequiresSubscriptionTitle: "Abbonamento Aggiuntivo Richiesto",
      smsRequiresSubscriptionText: "Per ricevere notifiche SMS, è necessario un abbonamento SMS attivo. Si prega di contattare il proprio fornitore di servizi.",
      active: "Attivo",
      inactive: "Inattivo",
      permissionRequiredSms: "Solo Admin/Tecnico può modificare questo.",
    }
  }
};

i18n
  .use(LanguageDetector) // erkennt automatisch die Sprache des Browsers
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'de', // Fallback auf Deutsch
    interpolation: {
      escapeValue: false, // React escaped bereits
    },
     // Optional: Debugging aktivieren
     // debug: process.env.NODE_ENV === 'development',
  });

export default i18n;